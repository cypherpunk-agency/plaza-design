<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Plaza Design Kit Demo</title>
  <link rel="stylesheet" href="plaza.css">
  <style>
    /* Demo-specific styles */
    .demo-container {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 2rem;
    }

    .demo-window {
      width: 100%;
      max-width: 1000px;
      height: 100%;
      max-height: 650px;
      display: flex;
      flex-direction: column;
    }

    .demo-content {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
    }

    .demo-center {
      text-align: center;
      z-index: 10;
    }

    .demo-title {
      font-size: clamp(48px, 10vw, 80px);
      margin-bottom: 1rem;
    }

    .demo-subtitle {
      font-size: clamp(12px, 2vw, 16px);
    }

    @media (max-width: 768px) {
      .demo-container {
        padding: 1rem;
      }

      .plaza-side-panel {
        display: none;
      }

      .demo-window {
        max-height: none;
      }
    }
  </style>
</head>
<body class="bg-black overflow-hidden">
  <!-- Grid Canvas Background -->
  <canvas id="grid-canvas" class="fixed inset-0 z-0"></canvas>

  <!-- Floating Particles -->
  <div id="particles" class="fixed inset-0 z-10 pointer-events-none"></div>

  <!-- Main Window Container -->
  <div class="demo-container z-20">
    <div class="plaza-window demo-window">
      <!-- Corner Brackets -->
      <div class="plaza-corner-bracket plaza-corner-bracket--tl"></div>
      <div class="plaza-corner-bracket plaza-corner-bracket--tr"></div>
      <div class="plaza-corner-bracket plaza-corner-bracket--bl"></div>
      <div class="plaza-corner-bracket plaza-corner-bracket--br"></div>

      <!-- Header Bar -->
      <div class="plaza-window-header">
        <span>
          <span class="text-accent-400">&gt; INITIATE_ACCESS //</span>
          <span class="text-primary-500 text-shadow-neon-sm ml-2">PROTOCOL ONLINE</span>
        </span>
        <span class="text-primary-600">
          NODE: <span id="node-count">--</span> ACTIVE
        </span>
      </div>

      <!-- Main Content Area -->
      <div class="demo-content">
        <!-- Left Side Panel -->
        <div class="plaza-side-panel plaza-side-panel--left">
          <div id="telemetry" class="mb-4"></div>
          <div id="routes" class="mb-4"></div>
          <div id="keys" class="mb-4"></div>
          <div class="plaza-hex-scroll">
            <div id="hex-left"></div>
          </div>
        </div>

        <!-- Center Content -->
        <div class="demo-center">
          <h1 id="title" class="demo-title font-bold text-primary-500 text-shadow-neon uppercase tracking-wider plaza-glitch" data-text="PLAZA">
            PLAZA
          </h1>
          <p class="demo-subtitle text-accent-400 tracking-widest uppercase mb-8">
            Decentralized Social Protocol
          </p>
          <div class="flex gap-4 justify-center flex-wrap">
            <button class="plaza-btn" onclick="handleEnter()">
              ENTER
            </button>
            <button class="plaza-btn plaza-btn--secondary" onclick="handleAbout()">
              ABOUT
            </button>
          </div>
        </div>

        <!-- Right Side Panel -->
        <div class="plaza-side-panel plaza-side-panel--right">
          <div id="netlog" class="mb-4"></div>
          <div id="status" class="mb-4"></div>
          <div class="plaza-hex-scroll">
            <div id="hex-right"></div>
          </div>
        </div>
      </div>

      <!-- Footer Bar -->
      <div class="plaza-window-footer">
        <span class="text-accent-400">[SYSTEM ONLINE]</span>
        <span class="text-primary-500">
          READY<span class="terminal-cursor">_</span>
        </span>
        <span id="clock" class="text-primary-600"></span>
      </div>
    </div>
  </div>

  <!-- About Modal (hidden by default) -->
  <div id="about-modal" class="fixed inset-0 z-50 hidden items-center justify-center" style="background: rgba(0,0,0,0.85);">
    <div class="plaza-window w-full max-w-lg mx-4 p-0">
      <div class="plaza-corner-bracket plaza-corner-bracket--tl"></div>
      <div class="plaza-corner-bracket plaza-corner-bracket--tr"></div>
      <div class="plaza-corner-bracket plaza-corner-bracket--bl"></div>
      <div class="plaza-corner-bracket plaza-corner-bracket--br"></div>

      <div class="plaza-window-header">
        <span class="text-primary-500">ABOUT // PLAZA</span>
        <button onclick="closeAbout()" class="text-primary-600 hover:text-primary-400 transition-colors">
          [X]
        </button>
      </div>

      <div class="p-6">
        <p class="text-primary-400 text-sm mb-4">
          <span class="text-accent-400">Mission:</span> Build decentralized social infrastructure that preserves
          <span class="text-primary-300">sovereignty</span>,
          <span class="text-primary-300">privacy</span>, and
          <span class="text-primary-300">credible neutrality</span>.
        </p>
        <p class="text-primary-400 text-sm mb-4">
          <span class="text-accent-400">Stack:</span> Polkadot Asset Hub, Solidity smart contracts, encrypted messaging, session wallet delegates.
        </p>
        <p class="text-primary-400 text-sm">
          <span class="text-accent-400">Design:</span> Terminal retro-futurism. No rounded corners. Neon glows. Monospace everything.
        </p>
      </div>

      <div class="plaza-window-footer justify-center">
        <button class="plaza-btn plaza-btn--secondary" onclick="closeAbout()">
          CLOSE
        </button>
      </div>
    </div>
  </div>

  <script type="module">
    import {
      initPlazaTheme,
      startClock,
      initGridCanvas,
      createParticles,
      initGlitchEffect,
      renderTelemetry,
      renderRoutes,
      renderKeys,
      renderNetLog,
      renderStatus,
      startHexScroll,
    } from './plaza.js';

    // Initialize theme
    initPlazaTheme();

    // Start clock
    startClock('clock', 'full');

    // Initialize grid canvas
    const grid = initGridCanvas('grid-canvas');
    grid.start();

    // Create particles
    createParticles('particles', 30);

    // Initialize glitch effect on title
    initGlitchEffect('title');

    // Render left side gimmicks
    renderTelemetry('telemetry');
    renderRoutes('routes');
    renderKeys('keys');

    // Render right side gimmicks
    renderNetLog('netlog', 5);
    renderStatus('status');

    // Start hex scrolls
    startHexScroll('hex-left', 2500);
    startHexScroll('hex-right', 2500);

    // Update dynamic data periodically
    setInterval(() => renderTelemetry('telemetry'), 5000);
    setInterval(() => renderNetLog('netlog', 5), 3000);

    // Update node count
    const updateNodeCount = () => {
      const count = Math.floor(Math.random() * 50) + 20;
      document.getElementById('node-count').textContent = count;
    };
    updateNodeCount();
    setInterval(updateNodeCount, 8000);

    // Keyboard shortcuts
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        window.handleEnter();
      } else if (e.key.toLowerCase() === 'a') {
        window.handleAbout();
      } else if (e.key === 'Escape') {
        window.closeAbout();
      } else if (e.key.toLowerCase() === 't') {
        import('./plaza.js').then(m => m.toggleTheme());
      }
    });

    // Expose handlers to window for onclick
    window.handleEnter = () => {
      // Flash effect on enter
      const title = document.getElementById('title');
      title.style.transform = 'scale(1.02)';
      title.style.filter = 'brightness(1.3)';
      setTimeout(() => {
        title.style.transform = '';
        title.style.filter = '';
      }, 200);

      // Could navigate to main app
      console.log('ENTER pressed - would navigate to main app');
    };

    window.handleAbout = () => {
      const modal = document.getElementById('about-modal');
      modal.classList.remove('hidden');
      modal.classList.add('flex');
    };

    window.closeAbout = () => {
      const modal = document.getElementById('about-modal');
      modal.classList.add('hidden');
      modal.classList.remove('flex');
    };
  </script>
</body>
</html>
