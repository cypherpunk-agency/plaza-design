<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>[cypherpunk.agency]</title>

  <!-- SEO & Social -->
  <meta name="description" content="INITIATING CONNECTION... PROTOCOL ONLINE. Decentralized social evolution. Node 42 active. Access granted.">
  <meta property="og:title" content="[cypherpunk.agency]">
  <meta property="og:description" content="INITIATING CONNECTION... PROTOCOL ONLINE. Decentralized social evolution. Node 42 active. Access granted.">
  <meta property="og:image" content="https://cypherpunk.agency/og-image.png">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://cypherpunk.agency/">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="[cypherpunk.agency]">
  <meta name="twitter:description" content="INITIATING CONNECTION... PROTOCOL ONLINE. Decentralized social evolution. Node 42 active. Access granted.">
  <meta name="twitter:image" content="https://cypherpunk.agency/og-image.png">

  <link rel="stylesheet" href="plaza-core/plaza.css">
  <style>
    /* Demo-specific styles */
    .demo-window {
      position: fixed;
      inset: 34px;
      display: flex;
      flex-direction: column;
    }

    .demo-content {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
      padding: 0 300px;
    }

    .demo-center {
      text-align: center;
      z-index: 10;
      pointer-events: none;
    }

    .demo-center * {
      pointer-events: auto;
    }

    .demo-title {
      font-size: clamp(44px, 7vw, 96px);
      margin-bottom: 1rem;
      line-height: 1.05;
    }

    .demo-subtitle {
      font-size: clamp(14px, 1.8vw, 20px);
      color: var(--color-accent-400);
      text-shadow:
        0 0 10px rgba(0, 255, 255, 0.6),
        0 0 20px rgba(0, 255, 255, 0.4);
    }

    @media (max-width: 980px) {
      .plaza-side-panel {
        display: none;
      }

      .demo-content {
        padding: 0 28px;
      }

      .demo-window {
        inset: 18px;
      }
    }
  </style>
</head>
<body class="bg-black overflow-hidden">
  <!-- Grid Canvas Background -->
  <canvas id="grid-canvas" class="fixed inset-0 z-0"></canvas>

  <!-- Floating Particles -->
  <div id="particles" class="fixed inset-0 z-10 pointer-events-none"></div>

  <!-- Main Window Container -->
  <div class="plaza-window demo-window z-20">
    <!-- Corner Brackets -->
    <div class="plaza-corner-bracket plaza-corner-bracket--tl"></div>
    <div class="plaza-corner-bracket plaza-corner-bracket--tr"></div>
    <div class="plaza-corner-bracket plaza-corner-bracket--bl"></div>
    <div class="plaza-corner-bracket plaza-corner-bracket--br"></div>

    <!-- Header Bar -->
    <div class="plaza-window-header">
      <span>
        <span>INITIATING CONNECTION...</span>
        <span style="color: rgba(80, 200, 120, 0.7); margin-left: 10px;">PROTOCOL ONLINE</span>
      </span>
      <span style="color: rgba(255,122,0,0.75);">NODES: <span id="node-count">--</span> ACTIVE</span>
    </div>

    <!-- Main Content Area -->
    <div class="demo-content">
      <!-- Left Side Panel -->
      <div class="plaza-side-panel plaza-side-panel--left">
        <div id="telemetry"></div>
        <div id="routes"></div>
        <div id="keys"></div>
        <div class="plaza-hex-scroll"><div id="hex-left"></div></div>
      </div>

      <!-- Center Content -->
      <div class="demo-center">
        <h1 id="title" class="demo-title font-bold text-primary-500 text-shadow-neon uppercase tracking-wider">[CYPHERPUNK.AGENCY]</h1>
        <p class="demo-subtitle text-accent-400 tracking-widest uppercase mb-8">DECENTRALIZED SOCIAL<span id="evolution-word" class="evolution-text" data-hover=" REVOLUTION">&nbsp; EVOLUTION</span></p>
        <div class="flex gap-4 justify-center flex-wrap" style="margin-top: 46px;">
          <button class="plaza-btn plaza-btn--tease">enter</button>
        </div>
      </div>

      <!-- Right Side Panel -->
      <div class="plaza-side-panel plaza-side-panel--right">
        <div id="netlog"></div>
        <div id="status"></div>
        <div class="plaza-hex-scroll"><div id="hex-right"></div></div>
      </div>
    </div>

    <!-- Footer Bar -->
    <div class="plaza-window-footer">
      <span class="footer-timestamp"><span id="clock"></span></span>
      <span class="footer-terminal">TERMINAL</span>
      <span class="footer-prompt">&gt;</span>
      <span class="footer-input-area"><span class="footer-not-auth">[ NOT AUTHENTICATED ]</span></span>
      <button class="footer-send-btn footer-send-btn--disabled" disabled>â–¶ SEND</button>
    </div>
  </div>

  <script type="module">
    import {
      initPlazaTheme,
      toggleTheme,
      startClock,
      initGridCanvas,
      createParticles,
      renderTelemetry,
      renderRoutes,
      renderKeys,
      renderNetLog,
      renderStatus,
      startHexScroll,
      updateNodeCount,
    } from './plaza.js';

    // Initialize theme
    initPlazaTheme();

    // Start clock
    startClock('clock', 'full');

    // Initialize grid canvas
    const grid = initGridCanvas('grid-canvas');
    grid.start();

    // Create particles (canonical count: 50)
    createParticles('particles', 50);

    // Render left side gimmicks
    renderTelemetry('telemetry');
    renderRoutes('routes');
    renderKeys('keys');

    // Render right side gimmicks
    renderNetLog('netlog');
    renderStatus('status');

    // Start hex scrolls
    startHexScroll('hex-left', 2500);
    startHexScroll('hex-right', 2500);

    // Update dynamic data periodically
    setInterval(() => renderTelemetry('telemetry'), 5000);
    setInterval(() => renderNetLog('netlog'), 3000);

    // Update node count with drift
    updateNodeCount('node-count');
    setInterval(() => updateNodeCount('node-count'), 8000);

    // Keyboard shortcuts
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        handleEnter();
      } else if (e.key.toLowerCase() === 't') {
        toggleTheme();
      }
    });

    // Flash effect on enter
    function handleEnter() {
      const title = document.getElementById('title');
      title.style.transform = 'scale(1.02)';
      title.style.filter = 'brightness(1.3)';
      setTimeout(() => {
        title.style.transform = '';
        title.style.filter = '';
      }, 200);
      // Refresh telemetry for visual feedback
      renderTelemetry('telemetry');
      renderNetLog('netlog');
    }

    // Evolution text hover effect - glitch once then revert
    const evolutionEl = document.getElementById('evolution-word');
    let evolutionTimeout = null;
    evolutionEl.addEventListener('mouseenter', () => {
      if (evolutionTimeout) return; // Already glitching
      evolutionEl.classList.add('glitching');
      evolutionTimeout = setTimeout(() => {
        evolutionEl.classList.remove('glitching');
        evolutionTimeout = null;
      }, 400);
    });
  </script>
</body>
</html>
